<div class="row">
	<div class="col">
		<h3>Data search</h3>
	</div>
</div>

<div class="row ">
	<div class="col">

		<div class="form-group">
			<input id="drillcoreName" class="form-control" placeholder="Drillcore name" [(ngModel)]="searchDrillcoreName" typeaheadOptionField="name"
			 [typeahead]="drillcoreAutocompleteValues" [typeaheadWaitMs]="200" autocomplete="off" (input)="getDrillcoreByName()" />
		</div>
		<div class="form-group">
			<select class="form-control"  [(ngModel)]="searchAnalysesMethods"  (focus)="getAnalyticalMehtods()" >
					<option value="" ></option>
				<option *ngFor="let method of methodAutocompleteValues"  value="{{method}}" >{{method}}</option>
			</select>		
		</div>
		<div class="form-group">
			<div class="input-group">
				<select class="form-control" [(ngModel)]="searchComparisonParameter" (focus)="getMeasuredParameters()">
					<option  value="" *ngFor="let parameter of measuredParameters" 
					value="{{getParameterColumnName(parameter.analysisresult__parameter__parameter,parameter.analysisresult__unit__unit)}}"> 
					{{parameter.analysisresult__parameter__parameter}} {{parameter.analysisresult__unit__unit}}</option>
				</select>

				<select class="form-control" [(ngModel)]="searchComparisonOperator" name="size">
					<option value=""> </option>
					<option value="iexact">Equals</option>
					<option value="gt">Greater than</option>
					<option value="lt">Smaller than</option>
				</select>

				<input type="text" [(ngModel)]="searchComparisonValue" class="form-control">
			</div> 
		</div>


		<!--<div class="form-group">
			<button class="btn btn-primary">Add parameter</button>
		</div>-->


		<!--{{searchComparisonParameter}}
		{{searchComparisonOperator}} 
		{{searchComparisonValue}}
		<!--<div class="form-group">
			<div class="input-group">
				<input type="text" class="form-control">

				<select class="form-control" name="size">
					<option value="">Choose a condition</option>
					<option value="s">Equals</option>
					<option value="m">Greater than</option>
					<option value="l">Smaller than</option>
				</select>

				<input type="text" class="form-control">
			</div>
		</div>-->
		<!--
		<ng-select 
		class="form-control"
		   [options]="opt" 
		   [multiple]="true"
		   
           placeholder="Select methods"
		   clearAllText="Clear"
		   [(ngModel)]="selected"
           >
			</ng-select>-->

		
		<!--<div class="form-group">
			<input id="parameters" class="form-control" placeholder="Parameters" data-role="tagsinput" />
		</div>
		<div class="form-group">
		<ng-select class="form-control" placeholder="Parameters" [options]="myOptions" [multiple]="true" [allowClear]="true" [(ngModel)]="selected">
		</ng-select>
		</div>
		{{selected}}
		<br><br>
		<h5>Advanced search (filtering with parameter value)</h5>
		<div class="form-group ">
			<input id="parameter" class="form-control2" placeholder="Parameter" data-role="tagsinput" />
			<select class="form-control2">
				<option value="gt">></option>
				<option value="lt">
					<</option>
			</select>
			<input type="text" class="form-control2">
		</div>-->
		<button class="btn btn-primary" (click)="getData()">SEARCH</button>
		<button class="btn btn-danger" (click)="resetFormValues()">RESET FORM</button>

	</div>
	<div class="col">
	</div>
</div>
<div class="row ">
	<div class="col">
		<ul class="nav nav-tabs">
			<li class="nav-item">
				<a class="nav-link" href="#drillcores" data-toggle="tab" (click)="getDrillcoresByIds()">Drillcores ({{drillcoreIds.length}})</a>
			</li>
			<li class="nav-item">
				<a class="nav-link " href="#samples" data-toggle="tab"   (click)="getSamplesByIds()">Samples ({{sampleIds.length}})</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" href="#analyses" data-toggle="tab" >Data ({{analysisIds.length}})</a>
			</li>
		</ul>
		<br>

		<div class="tab-content">
			<div class="tab-pane fade" id="drillcores">
				<table class="table table-hover table-bordered ">
					<thead class="thead-light">
						<tr>
							<th>ID</th>
							<th>Name</th>
							<th>Deposit</th>
							<th>Latitude</th>
							<th>Longitude</th>
							<th>Elevation</th>
							<th>Drillhole length</th>
							<th>Dip</th>
							<th>Azimuth</th>
							<th></th>
						</tr>
					</thead>
					<tr *ngFor="let site of sites">
						<td>{{site.id}}</td>
						<td><a routerLink="/drillcore/{{site.id}}">{{site.name}}</a></td>
						<td><a routerLink="/deposit/{{site.deposit__id}}">{{site.deposit__name}}</a></td>
						<td>{{site.latitude}}</td>
						<td>{{site.longitude}}</td>
						<td></td>
						<td>{{site.hole_length}}</td>
						<td>{{site.hole_dip}}</td>
						<td>{{site.hole_azimuth}}</td>
						<td><a routerLink="/drillcore_data/{{site.id}}">Show data</a></td>
					</tr>
				</table>
			</div>
			<div class="tab-pane fade" id="samples">
				<table class="table table-hover table-bordered ">
					<thead class="thead-light">
						<tr>
							<th>ID</th>
							<th>Number</th>
							<th>Drillcore</th>
							<th>Depth (m)</th>
							<th>Depth (m, interval)</th>
							<th>Purpose</th>
							<th>Person/Institution</th>
							<th>Date</th>
						</tr>
					</thead>
					<tr *ngFor="let sample of samples">
						<td><a href="javascript:void(0);" (click)="openNewWin('sample',sample.id)">{{sample.id}}</a></td>
						<td>{{sample.sample_number}}</td>
						<td><a routerLink="/drillcore/{{sample.drillcore__id}}">{{sample.drillcore__name}}</a></td>
						<td>{{sample.depth}}</td>
						<td>{{sample.end_depth}}</td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
				</table>
			</div>
			<div class="tab-pane fade" id="analyses">
				<table class="table table-hover table-bordered ">
					<thead class="thead-light">
						<tr>
							<th>Drillcore</th>
							<th>Depth from (m)</th>
							<th>Depth to (m)</th>
							<th>Sample </th>
							<th>Analysis</th>
							<th>Method</th>
							<th>{{searchComparisonParameter}}</th>
						</tr>
					</thead>
					<tr *ngFor="let analysisSum of analysisSummary">
						<td><a routerLink="/drillcore/{{analysisSum.drillcore_id}}">{{analysisSum.drillcore_id}}</a></td>
						<td>{{analysisSum.depth}}</td>
						<td>{{analysisSum.end_depth}}</td>
						<td><a href="javascript:void(0);" (click)="openNewWin('sample',analysisSum.sample_id)">{{analysisSum.sample_number}}</a></td>
						<td><a href="javascript:void(0);" (click)="openNewWin('analysis',analysisSum.analysis_id)">{{analysisSum.analysis_id}}</a></td>
						<td>{{analysisSum.analysis_method}}</td>
						<td>{{analysisSum[searchComparisonParameter]}}</td>
					</tr>
				</table>
			</div>
		</div>
	</div>
</div>